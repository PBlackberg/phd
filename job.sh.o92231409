Running cl metrics with regridded monthly data
switch: ['snapshot', 'sMean', 'tMean', 'low_clouds', 'save']
IPSL-CM6A-LR (cmip6)
	 historical
Traceback (most recent call last):
  File "/g/data/hh5/public/apps/miniconda3/envs/analysis3-23.04/lib/python3.9/site-packages/xarray/core/common.py", line 221, in _get_axis_num
    return self.dims.index(dim)
ValueError: tuple.index(x): x not in tuple

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/565/cb4968/Documents/code/phd/switch/calculation.py", line 140, in <module>
    cM.run_cl_metrics(switch = {
  File "/home/565/cb4968/Documents/code/phd/util/myFuncs.py", line 93, in wrapper
    result = func(*args, **kwargs)
  File "/home/565/cb4968/Documents/code/phd/calc_metrics/clouds/cl.py", line 114, in run_cl_metrics
    run_experiment(switch, source, dataset)
  File "/home/565/cb4968/Documents/code/phd/calc_metrics/clouds/cl.py", line 101, in run_experiment
    da, cloud_type = pick_cloud_type(switch, da, p_hybridsigma)
  File "/home/565/cb4968/Documents/code/phd/calc_metrics/clouds/cl.py", line 20, in pick_cloud_type
    da = da.where((p_hybridsigma <= 1500e2) & (p_hybridsigma >= 600e2), 0).max(dim='lev')
  File "/g/data/hh5/public/apps/miniconda3/envs/analysis3-23.04/lib/python3.9/site-packages/xarray/core/_aggregations.py", line 1501, in max
    return self.reduce(
  File "/g/data/hh5/public/apps/miniconda3/envs/analysis3-23.04/lib/python3.9/site-packages/xarray/core/dataarray.py", line 3681, in reduce
    var = self.variable.reduce(func, dim, axis, keep_attrs, keepdims, **kwargs)
  File "/g/data/hh5/public/apps/miniconda3/envs/analysis3-23.04/lib/python3.9/site-packages/xarray/core/variable.py", line 2001, in reduce
    axis = self.get_axis_num(dim)
  File "/g/data/hh5/public/apps/miniconda3/envs/analysis3-23.04/lib/python3.9/site-packages/xarray/core/common.py", line 217, in get_axis_num
    return self._get_axis_num(dim)
  File "/g/data/hh5/public/apps/miniconda3/envs/analysis3-23.04/lib/python3.9/site-packages/xarray/core/common.py", line 223, in _get_axis_num
    raise ValueError(f"{dim!r} not found in array dimensions {self.dims!r}")
ValueError: 'lev' not found in array dimensions ('time', 'presnivs', 'lat', 'lon', 'klevp1')

======================================================================================
                  Resource Usage on 2023-08-09 07:36:43:
   Job Id:             92231409.gadi-pbs
   Project:            w40
   Exit Status:        1
   Service Units:      0.16
   NCPUs Requested:    1                      NCPUs Used: 1               
                                           CPU Time Used: 00:00:13        
   Memory Requested:   50.0GB                Memory Used: 1.72GB          
   Walltime requested: 01:00:00            Walltime Used: 00:00:23        
   JobFS requested:    100.0MB                JobFS used: 0B              
======================================================================================
